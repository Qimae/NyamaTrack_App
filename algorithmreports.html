<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NyamaTrack — Algorithm Reports (Forecast) | Nyamatrack.co.ke</title>
  <meta name="description" content="Algorithm reports. Upload sales CSV and forecast future monthly income with trend + seasonality or Holt‑Winters. Nyamatrack.co.ke" />
  <link rel="stylesheet" href="utils/becken.css">
</head>
<body>
  <div class="bg" aria-hidden="true">
    <div class="orb red"></div>
    <div class="orb amber"></div>
    <div class="grid-overlay"></div>
  </div>
  <header>
    <div class="container">
      <nav aria-label="Primary">
        <div class="brand">
          <div class="brand-badge" aria-hidden="true"></div>
          <a href="subscription.html" aria-label="NyamaTrack home">NyamaTrack</a>
          <span class="pill">Nyamatrack.co.ke</span>
        </div>
        <div class="nav-links">
          <a href="subscription.html">Subscription</a>
          <a href="daily-reports.html">Daily Reports</a>
          <a href="algorithm-reports.html" aria-current="page">Algorithm Reports</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Algorithm Reports — Monthly Income Forecast</h1>
      <p class="muted">Upload historical monthly sales (KES) or use demo data, then forecast future income with confidence bands.</p>
    </section>

    <section class="algo_grid">
      <div class="card">
        <strong>Data</strong>
        <div class="row" style="margin-top:8px">
          <div style="flex:1">
            <label for="csv">Upload CSV (<code>date,sales</code>)</label>
            <input id="csv" type="file" accept=".csv,text/csv" />
          </div>
          <button class="btn" id="load-demo">Load Demo Data</button>
          <button class="btn" id="download-template">CSV Template</button>
        </div>

        <div class="row" style="margin-top:12px">
          <div>
            <label for="method">Method</label>
            <select id="method">
              <option value="trend-seasonal">Trend + Seasonal Indices</option>
              <option value="holt-winters">Holt‑Winters (Additive)</option>
            </select>
          </div>
          <div>
            <label for="horizon">Forecast Horizon (months)</label>
            <select id="horizon">
              <option>6</option><option selected>12</option><option>18</option><option>24</option>
            </select>
          </div>
          <div id="hw-params" class="row" style="display:none">
            <div><label>Alpha</label><input id="alpha" type="number" step="0.01" min="0" max="1" value="0.2"></div>
            <div><label>Beta</label><input id="beta" type="number" step="0.01" min="0" max="1" value="0.05"></div>
            <div><label>Gamma</label><input id="gamma" type="number" step="0.01" min="0" max="1" value="0.05"></div>
          </div>
          <button class="btn primary" id="run">Run Forecast</button>
        </div>
      </div>

      <div class="card">
        <strong>Quality</strong>
        <div class="grid" style="grid-template-columns: repeat(3,1fr); margin-top:10px">
          <div class="kpi"><div class="muted">MAPE</div><div class="value" id="mape">—</div></div>
          <div class="kpi"><div class="muted">RMSE</div><div class="value" id="rmse">—</div></div>
          <div class="kpi"><div class="muted">R²</div><div class="value" id="r2">—</div></div>
        </div>
        <div style="margin-top:8px" class="muted">Metrics computed on in‑sample fit. Confidence bands assume residual normality.</div>
      </div>
    </section>

    <section class="card" style="margin-top:16px">
      <div class="row" style="justify-content:space-between;align-items:center">
        <strong>Forecast</strong>
        <div class="row">
          <span class="pill">80% CI</span>
          <span class="pill">95% CI</span>
          <button class="btn" id="export-forecast">Download CSV</button>
        </div>
      </div>
      <canvas id="lineChart" role="img" aria-label="Line chart of historical and forecast monthly income"></canvas>
    </section>
  </main>

  <footer>
    © <span id="year"></span> NyamaTrack — Nyamatrack.co.ke
  </footer>

</body>
</html>